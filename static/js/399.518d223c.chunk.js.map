{"version":3,"file":"static/js/399.518d223c.chunk.js","mappings":"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","sources":["components/Messages/AddMessageForm/AddMessageForm.tsx","webpack://samurai_way_my/./src/components/Messages/DialogItem/DialogItem.module.css?ca70","components/Messages/DialogItem/DialogItem.tsx","webpack://samurai_way_my/./src/components/Messages/Messages.module.css?8e7e","webpack://samurai_way_my/./src/components/Messages/MessagesItem/MessagesItem.module.css?b9b7","components/Messages/MessagesItem/MessagesItem.tsx","components/Messages/Messages.tsx","components/Messages/MessagesContainer.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","hoc/withAuthRedirect.tsx","utils/selectors/selectors.tsx"],"sourcesContent":["import { FC, ReactElement } from 'react';\n\nimport { useFormik } from 'formik';\n\n// import { CommonConstants } from 'utils/enum/enum';\n\nexport type MessageFormikInputType = {\n  message: string;\n};\n\ntype AddMessageFormPropsType = {\n  addNewMessageHandle: (data: MessageFormikInputType) => void;\n};\n\nexport const AddMessageForm: FC<AddMessageFormPropsType> = ({\n  addNewMessageHandle,\n}): ReactElement => {\n  // const maxLength15 = useCallback(maxLengthCreator(MaxLengthSymbols.messageForm), []);\n\n  const formik = useFormik({\n    initialValues: {\n      message: '',\n    },\n    onSubmit: values => {\n      addNewMessageHandle(values);\n      formik.resetForm();\n    },\n  });\n  // const resetForm = (): void => {\n  //   setTimeout(() => {\n  //     formik.resetForm();\n  //   }, CommonConstants.two);\n  // };\n\n  return (\n    <form onSubmit={formik.handleSubmit}>\n      <input\n        id=\"message\"\n        name=\"message\"\n        type=\"message\"\n        placeholder=\"some text\"\n        onChange={formik.handleChange}\n        value={formik.values.message}\n        // validate={[requiredField, maxLength15]}\n      />\n      <button type=\"submit\">Add</button>\n    </form>\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"dialog\":\"DialogItem_dialog__-pVsd\",\"navLink\":\"DialogItem_navLink__LKG3K\"};","import React, { memo } from 'react';\n\nimport { NavLink } from 'react-router-dom';\n\nimport style from './DialogItem.module.css';\n\nexport type DialogPT = {\n  id: number;\n  name: string;\n  ava: string;\n};\n\nexport const DialogItem = memo((props: DialogPT) => (\n  <div className={style.dialog}>\n    <img alt=\"ava\" src={props.ava} title={props.name} id={props.id.toString()} />\n    <NavLink className={style.navLink} to={`/messages/${props.id}`}>\n      {' '}\n      {props.name}{' '}\n    </NavLink>\n  </div>\n));\n","// extracted by mini-css-extract-plugin\nexport default {\"dialogs\":\"Messages_dialogs__qyLTj\",\"dialogItems\":\"Messages_dialogItems__i1Qgj\",\"messages\":\"Messages_messages__+Iwp-\",\"addMessageForm\":\"Messages_addMessageForm__6OzgF\"};","// extracted by mini-css-extract-plugin\nexport default {\"message\":\"MessagesItem_message__USXB-\"};","import { memo } from 'react';\n\nimport style from './MessagesItem.module.css';\n\nexport type MessagePT = {\n  id: number;\n  text: string;\n};\n\nexport const MessagesItem = memo((props: MessagePT) => (\n  <div id={props.id.toString()} className={style.message}>\n    {props.text}\n  </div>\n));\n","import { FC } from 'react';\n\nimport { AddMessageForm, MessageFormikInputType } from './AddMessageForm/AddMessageForm';\nimport { DialogItem } from './DialogItem/DialogItem';\nimport style from './Messages.module.css';\nimport {\n  mapDispatchToPropsMessageType,\n  mapStateToPropsMessageType,\n} from './MessagesContainer';\nimport { MessagesItem } from './MessagesItem/MessagesItem';\n\nexport const Messages: FC<mapStateToPropsMessageType & mapDispatchToPropsMessageType> = ({\n  dialogsPage,\n  addNewMessage,\n}) => {\n  const addNewPost = (data: MessageFormikInputType): void => {\n    console.log(data);\n    if (data.message) {\n      addNewMessage(data.message.trim());\n    } else {\n      console.warn('field is empty');\n    }\n  };\n\n  return (\n    <div className={style.dialogs}>\n      <div className={style.dialogItems}>\n        {dialogsPage.dialogs.map(item => (\n          <DialogItem key={item.id} id={item.id} name={item.name} ava={item.ava} />\n        ))}\n      </div>\n      <div className={style.messages}>\n        <div>\n          {dialogsPage.messages.map(item => (\n            <MessagesItem key={item.id} id={item.id} text={item.text} />\n          ))}\n        </div>\n        <div className={style.addMessageForm}>\n          <AddMessageForm addNewMessageHandle={addNewPost} />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import { ComponentType, FC, ReactElement } from 'react';\n\nimport { connect } from 'react-redux';\nimport { compose, Dispatch } from 'redux';\n\nimport { DialogPT } from './DialogItem/DialogItem';\nimport { Messages } from './Messages';\nimport { MessagePT } from './MessagesItem/MessagesItem';\n\nimport { withAuthRedirect } from 'hoc/withAuthRedirect';\nimport { addTextMessageAC } from 'redux/dialogs_reducer';\nimport { AppStatePT } from 'redux/store_redux';\nimport { selectDialogsPage } from 'utils/selectors/selectors';\n\nconst MessageFunctionalComponent: FC<\n  mapStateToPropsMessageType & mapDispatchToPropsMessageType\n> = ({ addNewMessage, dialogsPage }): ReactElement => (\n  <Messages addNewMessage={addNewMessage} dialogsPage={dialogsPage} />\n);\nconst mapStateToProps = (state: AppStatePT): mapStateToPropsMessageType => ({\n  dialogsPage: selectDialogsPage(state),\n  // isAuth: selectAuth(state), // add\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): mapDispatchToPropsMessageType => ({\n  addNewMessage: (value: string) => dispatch(addTextMessageAC({ value })),\n});\n\nconst MessagesContainer = compose<ComponentType>(\n  connect(mapStateToProps, mapDispatchToProps),\n  withAuthRedirect,\n)(MessageFunctionalComponent);\n\nexport default MessagesContainer;\n\nexport type mapStateToPropsMessageType = {\n  dialogsPage: dialogsItemsPT;\n  // isAuth: boolean;\n};\n\nexport type dialogsItemsPT = {\n  dialogs: Array<DialogPT>;\n  messages: Array<MessagePT>;\n  // newText: string\n};\nexport type mapDispatchToPropsMessageType = {\n  addNewMessage: (value: string) => void;\n  // changeText: (newText: string) => void\n};\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import { ComponentType, ReactElement } from 'react';\n\nimport {\n  connect,\n  ConnectedComponent,\n  DispatchProp,\n  DistributiveOmit,\n  GetLibraryManagedProps,\n  Shared,\n} from 'react-redux';\nimport { Navigate } from 'react-router-dom';\n\nimport { AppStatePT } from 'redux/store_redux';\n\ntype MapStatePT = {\n  isAuth: boolean;\n};\n\nconst mapStateToProps = (state: AppStatePT): MapStatePT => ({\n  isAuth: state.auth.isAuth,\n});\n\nexport function withAuthRedirect<T>(\n  Component: ComponentType<T>,\n): ConnectedComponent<\n  (props: MapStatePT) => ReactElement,\n  DistributiveOmit<\n    GetLibraryManagedProps<(props: MapStatePT) => ReactElement>,\n    keyof Shared<\n      MapStatePT & DispatchProp,\n      GetLibraryManagedProps<(props: MapStatePT) => ReactElement>\n    >\n  >\n> {\n  //  <T> не работает со стрелочными функциями\n\n  const RedirectComponent = (props: MapStatePT): ReactElement => {\n    const { isAuth, ...restProps } = props; // Достаём isAuth, т.к. нам не нужно его передавать в компоненту\n\n    if (!isAuth) {\n      return <Navigate to=\"/login\" />;\n    }\n    // eslint-disable-next-line react/jsx-props-no-spreading\n    return <Component {...(restProps as T)} />; // Все что мы закинем сюда, добавит новые ключи в конечной компоненте\n  };\n\n  // let ConnectRedirectComponent = connect(mapStateToProps)(RedirectComponent)\n  return connect(mapStateToProps)(RedirectComponent);\n}\n","import { createSelector } from 'reselect';\n\nimport { dialogsItemsPT } from 'components/Messages/MessagesContainer';\nimport { UsersStatePT } from 'components/Users/UsersContainer';\nimport { ProfileType } from 'redux/profile_reducer';\nimport { AppStatePT } from 'redux/store_redux';\n\nexport const selectUsers = (state: AppStatePT): UsersStatePT => state.users; // примитивный селектор\n\nexport const selectUsersSuper = createSelector(\n  selectUsers,\n  users =>\n    // помимо selectUsers могут быть и другие селекторы и результат будет закинут как аргумент в фн.\n    users, // здесь может быть сложная фильтрация\n);\n\nexport const selectProfilePage = (state: AppStatePT): ProfileType =>\n  state.profilePage.profile;\nexport const selectProfilePageStatus = (state: AppStatePT): string =>\n  state.profilePage.status;\nexport const selectAuthorisedUserID = (state: AppStatePT): string =>\n  state.auth.data.id.toString();\nexport const selectDialogsPage = (state: AppStatePT): dialogsItemsPT => state.dialogsPage;\n// export const selectAuth = (state: AppStatePT): boolean => state.auth.isAuth;\nexport const selectIsAuth = (state: AppStatePT): { isAuth: boolean } => ({\n  isAuth: state.auth.isAuth,\n});\nexport const selectCaptcha = (state: AppStatePT): { captchaURL: string } => ({\n  captchaURL: state.auth.captchaURL,\n});\n"],"names":["AddMessageForm","addNewMessageHandle","formik","useFormik","initialValues","message","onSubmit","values","resetForm","handleSubmit","id","name","type","placeholder","onChange","handleChange","value","DialogItem","memo","props","className","style","alt","src","ava","title","toString","to","MessagesItem","text","Messages","dialogsPage","addNewMessage","dialogs","map","item","messages","data","console","log","trim","warn","compose","connect","state","selectDialogsPage","dispatch","addTextMessageAC","withAuthRedirect","_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","mapStateToProps","isAuth","auth","Component","restProps","selectUsersSuper","createSelector","users","selectProfilePage","profilePage","profile","selectProfilePageStatus","status","selectAuthorisedUserID","selectIsAuth","selectCaptcha","captchaURL"],"sourceRoot":""}